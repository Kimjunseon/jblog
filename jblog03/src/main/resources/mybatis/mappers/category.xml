<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="category">
		<select id="categoryList" resultType="categoryvo">
				<![CDATA[
					select a.id as id, c.title as title, c.descr as descr, count(d.category_no) as postNo
                      from user a, blog b, category c
                      left outer join post d
	                    on d.category_no = c.id
                     where b.id = a.id
		               and c.id = b.id
				  group by title
		          order by c.no desc
				]]>
		</select>

	<insert id="insert" parameterType="categoryvo">
		<![CDATA[
			insert into category values (null, #{title }, #{descr }, #{id })
		]]>
	</insert>
	
	<delete id="delete" parameterType="string">
	<![CDATA[
	delete from category
	 where title = #{title }
	]]>
	</delete>
	
	<select id="findNo" parameterType="string" resultType="categoryvo">
		<![CDATA[
		select	no, title, descr, id
		   from category
		  where title = #{title }
       group by title		
		]]>		
	</select>
	
	<insert id="insertCategory" parameterType="categoryvo">
		<![CDATA[
			insert into category values (null, '기본 카테고리', '기본 카테고리입니다.', #{id })
		]]>
	</insert>
	
</mapper>